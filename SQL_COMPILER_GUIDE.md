# MiniDB SQLç¼–è¯‘å™¨ - ä½¿ç”¨æŒ‡å—

## ç¼–è¯‘å’Œè¿è¡Œ

### ç¼–è¯‘SQLç¼–è¯‘å™¨
```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
cargo build --bin sql_compiler_demo
```

### è¿è¡Œæ–¹å¼

#### 1. è‡ªåŠ¨æµ‹è¯•æ¨¡å¼ï¼ˆæŽ¨èï¼‰
ç¨‹åºå¯åŠ¨åŽä¼šè‡ªåŠ¨è¿è¡Œå†…ç½®çš„5ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åŽæ ¹æ®è¾“å…¥æ–¹å¼é€‰æ‹©æ¨¡å¼ï¼š

```powershell
# ç›´æŽ¥è¿è¡Œï¼ŒæŸ¥çœ‹è‡ªåŠ¨æµ‹è¯• + è¿›å…¥äº¤äº’æ¨¡å¼
.\target\debug\sql_compiler_demo.exe
```

#### 2. æ‰¹é‡æµ‹è¯•æ¨¡å¼ï¼ˆä½¿ç”¨æµ‹è¯•æ–‡ä»¶ï¼‰
```powershell
# ä½¿ç”¨æ ‡å‡†æµ‹è¯•æ–‡ä»¶
Get-Content sql_compiler_tests.sql | .\target\debug\sql_compiler_demo.exe

# æˆ–è€…ä½¿ç”¨ç®€å•çš„æµ‹è¯•
echo "CREATE TABLE test (id INT)" | .\target\debug\sql_compiler_demo.exe
```

#### 3. äº¤äº’æ¨¡å¼
ç›´æŽ¥è¿è¡Œç¨‹åºï¼Œå®Œæˆè‡ªåŠ¨æµ‹è¯•åŽä¼šè¿›å…¥äº¤äº’æ¨¡å¼ï¼š
```powershell
.\target\debug\sql_compiler_demo.exe
# ç„¶åŽè¾“å…¥SQLè¯­å¥ï¼Œè¾“å…¥ 'quit' æˆ– 'exit' é€€å‡º
```

## æµ‹è¯•æ–‡ä»¶è¯´æ˜Ž

### `sql_compiler_tests.sql` - æ ‡å‡†æµ‹è¯•å¥—ä»¶
- åŒ…å«10ä¸ªå…¨é¢çš„æµ‹è¯•ç”¨ä¾‹
- éªŒè¯CREATE TABLEã€INSERTã€SELECTçš„å®Œæ•´æµç¨‹
- æµ‹è¯•è¡¨çŠ¶æ€åœ¨å¤šä¸ªæ“ä½œé—´çš„æŒç»­æ€§
- éªŒè¯æ¡ä»¶æŸ¥è¯¢å’Œå¤æ‚æ•°æ®ç±»åž‹

### æ”¯æŒçš„SQLè¯­æ³•

#### æ•°æ®ç±»åž‹
- `INT` - æ•´æ•°ç±»åž‹
- `VARCHAR(n)` - å˜é•¿å­—ç¬¦ä¸²ï¼Œnä¸ºæœ€å¤§é•¿åº¦
- `DECIMAL(p,s)` - å®šç‚¹æ•°ï¼Œpä¸ºç²¾åº¦ï¼Œsä¸ºå°æ•°ä½æ•°

#### CREATE TABLEè¯­æ³•
```sql
CREATE TABLE table_name (
    column1 datatype,
    column2 datatype,
    ...
)
```

#### INSERTè¯­æ³•
```sql
-- æŒ‡å®šåˆ—æ’å…¥
INSERT INTO table_name (col1, col2, ...) VALUES (val1, val2, ...)

-- å…¨åˆ—æ’å…¥
INSERT INTO table_name VALUES (val1, val2, ...)
```

#### SELECTè¯­æ³•
```sql
-- æŸ¥è¯¢æ‰€æœ‰åˆ—
SELECT * FROM table_name

-- æŸ¥è¯¢æŒ‡å®šåˆ—
SELECT col1, col2 FROM table_name

-- æ¡ä»¶æŸ¥è¯¢
SELECT col1, col2 FROM table_name WHERE condition
```

#### æ”¯æŒçš„WHEREæ¡ä»¶
- `=` ç­‰äºŽ
- `>` å¤§äºŽ
- `<` å°äºŽ
- æ›´å¤šæ“ä½œç¬¦å¯ä»¥æ‰©å±•

## è¾“å‡ºè¯´æ˜Ž

æ¯ä¸ªSQLè¯­å¥çš„ç¼–è¯‘è¿‡ç¨‹ä¼šæ˜¾ç¤ºï¼š

1. **å››å…ƒå¼è¯æ³•åˆ†æž**ï¼šæ˜¾ç¤ºtokenåºåˆ—ï¼ŒåŒ…å«ç±»åž‹ã€å€¼ã€ä½ç½®ä¿¡æ¯
2. **æŠ½è±¡è¯­æ³•æ ‘**ï¼šæ˜¾ç¤ºè§£æžåŽçš„ASTç»“æž„
3. **æ‰§è¡Œè®¡åˆ’**ï¼šæ˜¾ç¤ºæŸ¥è¯¢ä¼˜åŒ–åŽçš„æ‰§è¡Œæ­¥éª¤å’Œæˆæœ¬ä¼°ç®—

## å…³é”®ç‰¹æ€§

### âœ… å·²å®žçŽ°
- å®Œæ•´çš„è¯æ³•åˆ†æžï¼ˆæ”¯æŒå…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ•°å­—ã€å­—ç¬¦ä¸²ã€æ“ä½œç¬¦ï¼‰
- è¯­æ³•åˆ†æžå’ŒASTç”Ÿæˆ
- è¯­ä¹‰åˆ†æžï¼ˆè¡¨å­˜åœ¨æ€§æ£€æŸ¥ã€åˆ—éªŒè¯ï¼‰
- æŸ¥è¯¢è®¡åˆ’ç”Ÿæˆ
- **ä¼šè¯çŠ¶æ€ç®¡ç†**ï¼šè¡¨å®šä¹‰åœ¨å¤šä¸ªSQLè¯­å¥é—´æŒç»­æœ‰æ•ˆ
- äº¤äº’å¼å’Œæ‰¹é‡å¤„ç†æ¨¡å¼
- è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Š

### ðŸ”„ å®žçŽ°äº®ç‚¹
- **SQLCompilerSession**ï¼šè§£å†³äº†è¯­ä¹‰åˆ†æžå™¨çŠ¶æ€ç®¡ç†çš„æ ¸å¿ƒé—®é¢˜
- **æ™ºèƒ½è¾“å…¥æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«äº¤äº’å¼ç»ˆç«¯vsç®¡é“è¾“å…¥
- **å¥å£®çš„å­—ç¬¦å¤„ç†**ï¼šæ”¯æŒUTF-8å¹¶å¤„ç†ä¸å¯è§å­—ç¬¦
- **å­¦æœ¯çº§è¾“å‡º**ï¼šå››å…ƒå¼è¯æ³•åˆ†æžç¬¦åˆç¼–è¯‘åŽŸç†æ ‡å‡†

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜
1. **ç¼–è¯‘é”™è¯¯**ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ `cargo build`
2. **æƒé™é”™è¯¯**ï¼šåœ¨Windowsä¸Šå¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™
3. **å­—ç¬¦ç¼–ç é—®é¢˜**ï¼šç¡®ä¿SQLæ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 

### è°ƒè¯•ä¿¡æ¯
ç¨‹åºä¼šæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- é”™è¯¯ç±»åž‹ï¼ˆè¯æ³•/è¯­æ³•/è¯­ä¹‰ï¼‰
- ç²¾ç¡®çš„è¡Œåˆ—ä½ç½®
- å…·ä½“çš„é”™è¯¯æè¿°